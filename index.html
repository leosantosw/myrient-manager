<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Erista App - Myrient</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="welcome-popup" class="popup-overlay">
    <div class="popup-container">
      <div class="popup-header">
        <div class="popup-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
            <path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
          </svg>
        </div>
        <h2>Bem-vindo ao Gerenciador Myrient</h2>
      </div>
      
      <div class="popup-content">
        <div class="popup-warning">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          <div>
            <strong>Este software é 100% gratuito.</strong>
            <p>Se alguém está te vendendo, está tentando te enganar.</p>
          </div>
        </div>
        
        
        <button id="close-popup" class="popup-button">
          Entendi, vamos começar!
        </button>
        <div class="popup-footer">
          <div class="developer-badge">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="8.5" cy="7" r="4"></circle>
              <polyline points="17 11 19 13 23 9"></polyline>
            </svg>
            <span>Desenvolvido por <strong>Leo Santos</strong></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="app-container">
    <header class="app-header">
      <h1>Gerenciador para Myrient</h1>
    </header>

    <nav class="tabs-nav">
      <button class="tab-btn active" data-tab="files">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
          <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
        Arquivos
      </button>
      <button class="tab-btn" data-tab="downloads">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        Downloads
        <span class="badge" style="display: none;">0</span>
      </button>
      <button class="tab-btn" data-tab="settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v6m0 6v6m5.2-13.2l-4.2 4.2m-2 2l-4.2 4.2M23 12h-6m-6 0H1m18.2 5.2l-4.2-4.2m-2-2l-4.2-4.2"></path>
        </svg>
        Configurações
      </button>
    </nav>

    <div id="files-tab" class="tab-content active">
      <div class="container">
        <header class="tab-header">
          <div class="header-content">
            <h2>Lista de jogos</h2>
            <button id="refresh-btn" class="btn-icon" title="Recarregar lista">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
              </svg>
            </button>
          </div>
          
          <div class="search-container">
            <input 
              type="text" 
              id="search-input" 
              placeholder="Buscar jogos..." 
              autocomplete="off"
            >
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </div>
        </header>

        <div id="loading" class="loading hidden">
          <div class="spinner"></div>
          <p>Carregando arquivos...</p>
        </div>

        <div id="error" class="error hidden">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
          <p id="error-message">Erro ao carregar arquivos</p>
          <button id="retry-btn" class="btn-primary">Tentar novamente</button>
        </div>

        <div id="stats" class="stats hidden">
          <span id="total-files" class="stat-item">0 arquivos</span>
          <span id="filtered-count" class="stat-item"></span>
        </div>

        <div id="table-container" class="table-container hidden">
          <table class="files-table">
            <thead>
              <tr>
                <th class="sortable" data-sort="name">
                  Nome
                  <span class="sort-indicator"></span>
                </th>
                <th class="sortable" data-sort="size">
                  Tamanho
                  <span class="sort-indicator"></span>
                </th>
                <th class="sortable" data-sort="date">
                  Data
                  <span class="sort-indicator"></span>
                </th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="files-list"></tbody>
          </table>
        </div>

        <div id="empty-state" class="empty-state hidden">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <p>Nenhum arquivo encontrado</p>
        </div>
      </div>
    </div>

    <div id="downloads-tab" class="tab-content">
      <div class="container">
        <header class="tab-header">
          <h2>Gerenciador de Downloads</h2>
        </header>

        <div class="downloads-filters">
          <button class="download-filter active" data-filter="all">
            Todos (<span id="count-all">0</span>)
          </button>
          <button class="download-filter" data-filter="active">
            Em andamento (<span id="count-active">0</span>)
          </button>
          <button class="download-filter" data-filter="completed">
            Concluídos (<span id="count-completed">0</span>)
          </button>
          <button class="download-filter" data-filter="errors">
            Erros (<span id="count-errors">0</span>)
          </button>
        </div>

        <div class="download-settings">
          <div class="setting-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
            </svg>
            <span>Pasta: <strong id="download-path">Carregando...</strong></span>
          </div>
          <button id="change-path-btn" class="btn-secondary">Alterar</button>
          <button id="open-folder-btn" class="btn-secondary">Abrir Pasta</button>
        </div>

        <div id="downloads-list" class="downloads-list"></div>

        <div id="downloads-empty" class="empty-state">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          <p>Nenhum download ainda</p>
          <small>Clique em "Baixar" na aba de arquivos para iniciar</small>
        </div>
      </div>
    </div>

    <div id="settings-tab" class="tab-content">
      <div class="container">
        <div class="settings-container">
          <header class="tab-header">
            <h2>Configurações</h2>
          </header>

          <div id="settings-status" class="settings-status hidden"></div>
          <section class="settings-section">
            <h3 class="settings-section-title">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
              </svg>
              Fonte de Dados
            </h3>
            <div class="settings-group">
              <label class="settings-label" for="myrient-url">
                URL do Myrient
                <span class="settings-hint">URL base para buscar os arquivos</span>
              </label>
              <div class="input-with-button">
                <input 
                  type="text" 
                  id="myrient-url" 
                  class="settings-input"
                  placeholder="https://myrient.erista.me/files/..."
                >
                <button id="test-url-btn" class="btn-secondary">Salvar</button>
              </div>
            </div>
          </section>

          <section class="settings-section">
            <h3 class="settings-section-title">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              Downloads
            </h3>
            
            <div class="settings-group">
              <label class="settings-label" for="download-path">
                Pasta de Downloads
                <span class="settings-hint">Local onde os arquivos serão salvos</span>
              </label>
              <div class="input-with-button">
                <input 
                  type="text" 
                  id="settings-download-path" 
                  class="settings-input"
                  readonly
                  placeholder="Selecione uma pasta..."
                >
                <button id="browse-path-btn" class="btn-secondary">Procurar</button>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label" for="num-connections">
                Número de Conexões Paralelas
                <span class="settings-hint">Mais conexões = download mais rápido (recomendado: 50-200)</span>
              </label>
              <div class="input-with-value">
                <input 
                  type="range" 
                  id="num-connections" 
                  class="settings-range"
                  min="1"
                  max="300"
                  step="1"
                  value="100"
                >
                <span id="num-connections-value" class="range-value">100</span>
              </div>
            </div>

            <div class="settings-group">
              <label class="settings-label" for="max-concurrent">
                Downloads Simultâneos
                <span class="settings-hint">Quantos downloads podem ocorrer ao mesmo tempo (máximo: 4)</span>
              </label>
              <div class="input-with-value">
                <input 
                  type="range" 
                  id="max-concurrent" 
                  class="settings-range"
                  min="1"
                  max="4"
                  step="1"
                  value="1"
                >
                <span id="max-concurrent-value" class="range-value">1</span>
              </div>
            </div>
          </section>

          <section class="settings-section">
            <h3 class="settings-section-title">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="9" y1="9" x2="15" y2="15"></line>
                <line x1="15" y1="9" x2="9" y2="15"></line>
              </svg>
              Avançado
            </h3>

            <div class="settings-group">
              <label class="settings-label" for="max-history">
                Histórico Máximo de Downloads
                <span class="settings-hint">Quantos downloads manter no histórico</span>
              </label>
              <div class="input-with-value">
                <input 
                  type="range" 
                  id="max-history" 
                  class="settings-range"
                  min="10"
                  max="500"
                  step="10"
                  value="100"
                >
                <span id="max-history-value" class="range-value">100</span>
              </div>
            </div>

            <div class="settings-group">
              <button id="clear-history-btn" class="btn-danger">Limpar Histórico de Downloads</button>
            </div>
          </section>

          <div class="settings-actions">
            <button id="save-settings-btn" class="btn-primary">Salvar Configurações</button>
            <button id="reset-settings-btn" class="btn-secondary">Restaurar Padrões</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="src/ui/utils-browser.js"></script>
  
  <script src="src/ui/downloads/download-card-browser.js"></script>
  
  <script src="src/ui/tabs/tabs-manager-browser.js"></script>
  <script src="src/ui/downloads/downloads-renderer-browser.js"></script>
  <script src="src/ui/settings/settings-renderer-browser.js"></script>
  
  <script src="src/renderer.js"></script>
  
  <script>
    const welcomePopup = document.getElementById('welcome-popup');
    const closePopupBtn = document.getElementById('close-popup');
    
    const hasSeenWelcome = localStorage.getItem('hasSeenWelcome');
    
    if (hasSeenWelcome) {
      welcomePopup.classList.add('hidden');
    }
    
    closePopupBtn.addEventListener('click', () => {
      welcomePopup.classList.add('hidden');
      localStorage.setItem('hasSeenWelcome', 'true');
    });

    tabsManager.init();
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        downloadsRenderer.init();
        settingsRenderer.init();
      });
    } else {
      downloadsRenderer.init();
      settingsRenderer.init();
    }
  </script>
</body>
</html>
